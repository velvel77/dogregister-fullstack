<h1 class="welcome-heading">Welcome to Dog Register!</h1>
<!-- Add Dog button -->
<button type="button" class="btn-add-dog" (click)="openDialog()">Add Dog</button>
<!-- Modal Creation-->
<dialog #dogDialog aria-labelledby="addDogTitle" aria-modal="true">
    <header class="modal-header">
        <h2 id="addDogTitle">Add a new dog</h2>
        <button type="button" class="btn-close" (click)="closeDialog()" aria-label="Close dialog">
            <app-icon name="x" size="20"></app-icon>
        </button>
    </header>
    <form [formGroup]="form" (ngSubmit)="onCreate()" class="modal-form">
        <label>
            Name <input type="text" formControlName="name" required />
        </label>
        <label>
            Breed <input type="text" formControlName="breed" required />
        </label>
        <label>
            Age <input type="number" formControlName="age" min="0" required />
        </label>
        <label>
            Weight (kg) <input type="number" formControlName="weight" min="0" required />
        </label>
        <menu class="modal-actions">
            <button type="submit" class="btn-submit-create-dog" [disabled]="form.invalid || creating">Save</button>
            <button type="button" class="btn-cancel" (click)="closeDialog()">Cancel</button>
        </menu>
    </form>
</dialog>
<dialog #confirmDialog aria-labelledby="confirmTitle" aria-modal="true">
    <header class="modal-header">
        <h3 id="confirmTitle">Delete dog?</h3>
        <button type="button" class="btn-close" (click)="cancelDelete()" aria-label="Close Dialog">x</button>
    </header>

    <section class="modal-body">
        <p *ngIf="pendingDeleteName">Are you sure you want to delete <strong>{{pendingDeleteName }}</strong>?</p>
    </section>

    <menu class="modal-actions">
        <button type="button" class="btn-confirm-delete-dog" (click)="confirmDelete()">Delete</button>
        <button type="button" class="btn-cancel" (click)="cancelDelete()">Cancel</button>
    </menu>
</dialog>
<!-- List of registered dogs -->
<ng-container *ngIf="dogs$ | async as dogs; else loading">
    <p *ngIf="dogs.length === 0" class="muted">No dogs registered yet.</p>
    <!-- Wrapper for list -->
    <section class="table-region" aria-label="Registered dogs">
        <table class="dog-table">
            <caption class="sr-only">Registered dogs</caption>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Breed</th>
                    <th scope="col">Age</th>
                    <th scope="col">Weight</th>
                    <th scope="col">Tail Length</th>
                    <th scope="col" class="action header"></th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let d of dogs; trackBy: trackByDogId">
                    <td class="name">{{ d.name }}</td>
                    <td>{{ d.breed }}</td>
                    <td>{{ d.age }}</td>
                    <td>{{ d.weight }} kg</td>
                    <td>{{ d.tailLength | number:'1.1-1' }} cm</td>
                    <td>
                        <button type="button"
                                class="btn-delete"
                                (click)="askDelete(d)"
                                [attr.aria-label]="'Delete ' + d.name">
                            <app-icon name="trash-2" size="18"></app-icon>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>
</ng-container>
<!-- index.html -->
<ng-template #loading>
    <p class="muted">Loading dogs...</p>
</ng-template>